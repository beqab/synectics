import Link from "next/link";
import React, { useState } from "react";
import X from "../svgs/x";
import classnames from "classnames";
import { menuObject } from "./servicesDropdown";
import ServicesDropdown from "./servicesDropdown";
import { useRouter } from "next/router";
import classNames from "classnames";

interface IProps {
  setOpenMenu?: (e: any) => void;
  openMenu: boolean;
}

const MobileMenu: React.FC<IProps> = ({ setOpenMenu, openMenu }) => {
  const [service, setService] = useState(false);
  const [menuStep, setMenuStep] = useState<any>("");

  const router = useRouter();

  return (
    <div
      onClick={(e) => {
        e.stopPropagation();
      }}
      className={classnames("mobileMenu", {
        mobileMenu_open: openMenu,
      })}
    >
      <div className="mobileMenu_wrapper">
        <div className="mobileMenu_leftSide">
          <div
            className={classNames(
              "rightSide chidSubmenu ",
              "img" + menuObject.map((el) => el.title).indexOf(menuStep)
            )}
          ></div>
          {!menuStep ? (
            <div>
              <ul className="list-unstyled">
                <li>
                  <Link href={"/"}>
                    <a>Home</a>
                  </Link>
                </li>
                <li>
                  <Link href={"/"}>
                    <a
                      onClick={(e) => {
                        e.stopPropagation();
                        e.preventDefault();
                        setMenuStep("service");
                      }}
                      className="d-flex w-100 align-items-center justify-content-between"
                    >
                      <span>Services</span>
                      <svg
                        width="8"
                        height="14"
                        viewBox="0 0 8 14"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M1.33203 12.8335L7.13468 7.03085L1.33203 1.22821"
                          stroke="#5D6974"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                      </svg>
                    </a>
                  </Link>
                </li>
                <li>
                  <Link href={"/#technologies"}>
                    <a>Technologies</a>
                  </Link>
                </li>
                <li>
                  <Link href={"/#ourApproach"}>
                    <a>Our Approach</a>
                  </Link>
                </li>
                <li>
                  <Link href={"/aboutUs"}>
                    <a>About Us</a>
                  </Link>
                </li>
                <li>
                  <Link href={"/contact"}>
                    <a>Contact US</a>
                  </Link>
                </li>
              </ul>
              <Link href={"/estimatePrice"}>
                <a>
                  <svg
                    width="177"
                    height="48"
                    viewBox="0 0 177 48"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <rect width="177" height="48" rx="12" fill="#2F80ED" />
                    <path
                      d="M39.854 22.168C39.854 22.6627 39.7373 23.1293 39.504 23.568C39.2707 24.0067 38.8973 24.366 38.384 24.646C37.8707 24.9167 37.2127 25.052 36.41 25.052H34.646V29H33.05V19.27H36.41C37.1567 19.27 37.7867 19.4007 38.3 19.662C38.8227 19.914 39.21 20.2593 39.462 20.698C39.7233 21.1367 39.854 21.6267 39.854 22.168ZM36.41 23.75C37.0167 23.75 37.4693 23.6147 37.768 23.344C38.0667 23.064 38.216 22.672 38.216 22.168C38.216 21.104 37.614 20.572 36.41 20.572H34.646V23.75H36.41ZM42.9722 22.406C43.2055 22.014 43.5135 21.7107 43.8962 21.496C44.2882 21.272 44.7502 21.16 45.2822 21.16V22.812H44.8762C44.2508 22.812 43.7748 22.9707 43.4482 23.288C43.1308 23.6053 42.9722 24.156 42.9722 24.94V29H41.3762V21.286H42.9722V22.406ZM47.5612 20.264C47.2719 20.264 47.0292 20.166 46.8332 19.97C46.6372 19.774 46.5392 19.5313 46.5392 19.242C46.5392 18.9527 46.6372 18.71 46.8332 18.514C47.0292 18.318 47.2719 18.22 47.5612 18.22C47.8412 18.22 48.0792 18.318 48.2752 18.514C48.4712 18.71 48.5692 18.9527 48.5692 19.242C48.5692 19.5313 48.4712 19.774 48.2752 19.97C48.0792 20.166 47.8412 20.264 47.5612 20.264ZM48.3452 21.286V29H46.7492V21.286H48.3452ZM49.9086 25.136C49.9086 24.3427 50.0673 23.6473 50.3846 23.05C50.7113 22.4433 51.1593 21.9767 51.7286 21.65C52.298 21.3233 52.9513 21.16 53.6886 21.16C54.622 21.16 55.392 21.384 55.9986 21.832C56.6146 22.2707 57.03 22.9007 57.2446 23.722H55.5226C55.3826 23.3393 55.1586 23.0407 54.8506 22.826C54.5426 22.6113 54.1553 22.504 53.6886 22.504C53.0353 22.504 52.5126 22.7373 52.1206 23.204C51.738 23.6613 51.5466 24.3053 51.5466 25.136C51.5466 25.9667 51.738 26.6153 52.1206 27.082C52.5126 27.5487 53.0353 27.782 53.6886 27.782C54.6126 27.782 55.224 27.376 55.5226 26.564H57.2446C57.0206 27.348 56.6006 27.9733 55.9846 28.44C55.3686 28.8973 54.6033 29.126 53.6886 29.126C52.9513 29.126 52.298 28.9627 51.7286 28.636C51.1593 28.3 50.7113 27.8333 50.3846 27.236C50.0673 26.6293 49.9086 25.9293 49.9086 25.136ZM65.9052 24.954C65.9052 25.2433 65.8865 25.5047 65.8492 25.738H59.9552C60.0018 26.354 60.2305 26.8487 60.6412 27.222C61.0518 27.5953 61.5558 27.782 62.1532 27.782C63.0118 27.782 63.6185 27.4227 63.9732 26.704H65.6952C65.4618 27.4133 65.0372 27.9967 64.4212 28.454C63.8145 28.902 63.0585 29.126 62.1532 29.126C61.4158 29.126 60.7532 28.9627 60.1652 28.636C59.5865 28.3 59.1292 27.8333 58.7932 27.236C58.4665 26.6293 58.3032 25.9293 58.3032 25.136C58.3032 24.3427 58.4618 23.6473 58.7792 23.05C59.1058 22.4433 59.5585 21.9767 60.1372 21.65C60.7252 21.3233 61.3972 21.16 62.1532 21.16C62.8812 21.16 63.5298 21.3187 64.0992 21.636C64.6685 21.9533 65.1118 22.4013 65.4292 22.98C65.7465 23.5493 65.9052 24.2073 65.9052 24.954ZM64.2392 24.45C64.2298 23.862 64.0198 23.3907 63.6092 23.036C63.1985 22.6813 62.6898 22.504 62.0832 22.504C61.5325 22.504 61.0612 22.6813 60.6692 23.036C60.2772 23.3813 60.0438 23.8527 59.9692 24.45H64.2392ZM72.7085 20.558V23.414H76.0685V24.716H72.7085V27.698H76.4885V29H71.1125V19.256H76.4885V20.558H72.7085ZM81.2543 29.126C80.6476 29.126 80.1016 29.0187 79.6163 28.804C79.1403 28.58 78.7623 28.2813 78.4823 27.908C78.2023 27.5253 78.053 27.1007 78.0343 26.634H79.6863C79.7143 26.9607 79.8683 27.236 80.1483 27.46C80.4376 27.6747 80.797 27.782 81.2263 27.782C81.6743 27.782 82.0196 27.698 82.2623 27.53C82.5143 27.3527 82.6403 27.1287 82.6403 26.858C82.6403 26.5687 82.5003 26.354 82.2203 26.214C81.9496 26.074 81.5156 25.92 80.9183 25.752C80.3396 25.5933 79.8683 25.4393 79.5043 25.29C79.1403 25.1407 78.823 24.912 78.5523 24.604C78.291 24.296 78.1603 23.89 78.1603 23.386C78.1603 22.9753 78.2816 22.602 78.5243 22.266C78.767 21.9207 79.1123 21.65 79.5603 21.454C80.0176 21.258 80.5403 21.16 81.1283 21.16C82.0056 21.16 82.7103 21.384 83.2423 21.832C83.7836 22.2707 84.073 22.8727 84.1103 23.638H82.5143C82.4863 23.2927 82.3463 23.0173 82.0943 22.812C81.8423 22.6067 81.5016 22.504 81.0723 22.504C80.6523 22.504 80.3303 22.5833 80.1063 22.742C79.8823 22.9007 79.7703 23.1107 79.7703 23.372C79.7703 23.5773 79.845 23.75 79.9943 23.89C80.1436 24.03 80.3256 24.142 80.5403 24.226C80.755 24.3007 81.0723 24.3987 81.4923 24.52C82.0523 24.6693 82.5096 24.8233 82.8643 24.982C83.2283 25.1313 83.541 25.3553 83.8023 25.654C84.0636 25.9527 84.199 26.3493 84.2083 26.844C84.2083 27.2827 84.087 27.6747 83.8443 28.02C83.6016 28.3653 83.2563 28.636 82.8083 28.832C82.3696 29.028 81.8516 29.126 81.2543 29.126ZM87.7948 22.588V26.858C87.7948 27.1473 87.8601 27.3573 87.9908 27.488C88.1308 27.6093 88.3641 27.67 88.6908 27.67H89.6708V29H88.4108C87.6921 29 87.1415 28.832 86.7588 28.496C86.3761 28.16 86.1848 27.614 86.1848 26.858V22.588H85.2748V21.286H86.1848V19.368H87.7948V21.286H89.6708V22.588H87.7948ZM91.9538 20.264C91.6645 20.264 91.4218 20.166 91.2258 19.97C91.0298 19.774 90.9318 19.5313 90.9318 19.242C90.9318 18.9527 91.0298 18.71 91.2258 18.514C91.4218 18.318 91.6645 18.22 91.9538 18.22C92.2338 18.22 92.4718 18.318 92.6678 18.514C92.8638 18.71 92.9618 18.9527 92.9618 19.242C92.9618 19.5313 92.8638 19.774 92.6678 19.97C92.4718 20.166 92.2338 20.264 91.9538 20.264ZM92.7378 21.286V29H91.1418V21.286H92.7378ZM104.171 21.16C104.778 21.16 105.319 21.286 105.795 21.538C106.281 21.79 106.659 22.1633 106.929 22.658C107.209 23.1527 107.349 23.75 107.349 24.45V29H105.767V24.688C105.767 23.9973 105.595 23.47 105.249 23.106C104.904 22.7327 104.433 22.546 103.835 22.546C103.238 22.546 102.762 22.7327 102.407 23.106C102.062 23.47 101.889 23.9973 101.889 24.688V29H100.307V24.688C100.307 23.9973 100.135 23.47 99.7892 23.106C99.4439 22.7327 98.9725 22.546 98.3752 22.546C97.7779 22.546 97.3019 22.7327 96.9472 23.106C96.6019 23.47 96.4292 23.9973 96.4292 24.688V29H94.8332V21.286H96.4292V22.168C96.6905 21.8507 97.0219 21.6033 97.4232 21.426C97.8245 21.2487 98.2539 21.16 98.7112 21.16C99.3272 21.16 99.8779 21.2907 100.363 21.552C100.849 21.8133 101.222 22.1913 101.483 22.686C101.717 22.2193 102.081 21.8507 102.575 21.58C103.07 21.3 103.602 21.16 104.171 21.16ZM108.848 25.108C108.848 24.3333 109.007 23.6473 109.324 23.05C109.651 22.4527 110.089 21.9907 110.64 21.664C111.2 21.328 111.816 21.16 112.488 21.16C113.095 21.16 113.622 21.2813 114.07 21.524C114.527 21.7573 114.891 22.0513 115.162 22.406V21.286H116.772V29H115.162V27.852C114.891 28.216 114.523 28.5193 114.056 28.762C113.589 29.0047 113.057 29.126 112.46 29.126C111.797 29.126 111.191 28.958 110.64 28.622C110.089 28.2767 109.651 27.8007 109.324 27.194C109.007 26.578 108.848 25.8827 108.848 25.108ZM115.162 25.136C115.162 24.604 115.05 24.142 114.826 23.75C114.611 23.358 114.327 23.0593 113.972 22.854C113.617 22.6487 113.235 22.546 112.824 22.546C112.413 22.546 112.031 22.6487 111.676 22.854C111.321 23.05 111.032 23.344 110.808 23.736C110.593 24.1187 110.486 24.576 110.486 25.108C110.486 25.64 110.593 26.1067 110.808 26.508C111.032 26.9093 111.321 27.2173 111.676 27.432C112.04 27.6373 112.423 27.74 112.824 27.74C113.235 27.74 113.617 27.6373 113.972 27.432C114.327 27.2267 114.611 26.928 114.826 26.536C115.05 26.1347 115.162 25.668 115.162 25.136ZM120.73 22.588V26.858C120.73 27.1473 120.796 27.3573 120.926 27.488C121.066 27.6093 121.3 27.67 121.626 27.67H122.606V29H121.346C120.628 29 120.077 28.832 119.694 28.496C119.312 28.16 119.12 27.614 119.12 26.858V22.588H118.21V21.286H119.12V19.368H120.73V21.286H122.606V22.588H120.73ZM124.889 20.264C124.6 20.264 124.357 20.166 124.161 19.97C123.965 19.774 123.867 19.5313 123.867 19.242C123.867 18.9527 123.965 18.71 124.161 18.514C124.357 18.318 124.6 18.22 124.889 18.22C125.169 18.22 125.407 18.318 125.603 18.514C125.799 18.71 125.897 18.9527 125.897 19.242C125.897 19.5313 125.799 19.774 125.603 19.97C125.407 20.166 125.169 20.264 124.889 20.264ZM125.673 21.286V29H124.077V21.286H125.673ZM131.115 29.126C130.387 29.126 129.729 28.9627 129.141 28.636C128.553 28.3 128.091 27.8333 127.755 27.236C127.419 26.6293 127.251 25.9293 127.251 25.136C127.251 24.352 127.423 23.6567 127.769 23.05C128.114 22.4433 128.585 21.9767 129.183 21.65C129.78 21.3233 130.447 21.16 131.185 21.16C131.922 21.16 132.589 21.3233 133.187 21.65C133.784 21.9767 134.255 22.4433 134.601 23.05C134.946 23.6567 135.119 24.352 135.119 25.136C135.119 25.92 134.941 26.6153 134.587 27.222C134.232 27.8287 133.747 28.3 133.131 28.636C132.524 28.9627 131.852 29.126 131.115 29.126ZM131.115 27.74C131.525 27.74 131.908 27.642 132.263 27.446C132.627 27.25 132.921 26.956 133.145 26.564C133.369 26.172 133.481 25.696 133.481 25.136C133.481 24.576 133.373 24.1047 133.159 23.722C132.944 23.33 132.659 23.036 132.305 22.84C131.95 22.644 131.567 22.546 131.157 22.546C130.746 22.546 130.363 22.644 130.009 22.84C129.663 23.036 129.388 23.33 129.183 23.722C128.977 24.1047 128.875 24.576 128.875 25.136C128.875 25.9667 129.085 26.6107 129.505 27.068C129.934 27.516 130.471 27.74 131.115 27.74ZM140.588 21.16C141.195 21.16 141.736 21.286 142.212 21.538C142.698 21.79 143.076 22.1633 143.346 22.658C143.617 23.1527 143.752 23.75 143.752 24.45V29H142.17V24.688C142.17 23.9973 141.998 23.47 141.652 23.106C141.307 22.7327 140.836 22.546 140.238 22.546C139.641 22.546 139.165 22.7327 138.81 23.106C138.465 23.47 138.292 23.9973 138.292 24.688V29H136.696V21.286H138.292V22.168C138.554 21.8507 138.885 21.6033 139.286 21.426C139.697 21.2487 140.131 21.16 140.588 21.16Z"
                      fill="white"
                    />
                  </svg>
                </a>
              </Link>
            </div>
          ) : menuStep === "service" ? (
            <div>
              <ul className="list-unstyled">
                <li>
                  <Link href={"/"}>
                    <a
                      onClick={(e) => {
                        e.preventDefault();
                        setMenuStep("");
                      }}
                      className="d-flex w-100 align-items-center justify-content-between"
                    >
                      <span>{"service"}</span>
                      <svg
                        style={{
                          transform: "rotate(180deg) ",
                        }}
                        width="8"
                        height="14"
                        viewBox="0 0 8 14"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M1.33203 12.8335L7.13468 7.03085L1.33203 1.22821"
                          stroke="#5D6974"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                      </svg>
                    </a>
                  </Link>
                </li>
                {menuObject.map((el, i) => {
                  return (
                    <li>
                      <Link href={"/"}>
                        <a
                          onClick={(e) => {
                            e.preventDefault();
                            if (el.items.length) {
                              setMenuStep(el.title);
                            } else {
                              router.push(el.href);
                            }
                          }}
                          className="d-flex w-100 align-items-center justify-content-between"
                        >
                          <span>{el.title}</span>
                          {el.items.length ? (
                            <svg
                              width="8"
                              height="14"
                              viewBox="0 0 8 14"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path
                                d="M1.33203 12.8335L7.13468 7.03085L1.33203 1.22821"
                                stroke="#5D6974"
                                stroke-width="1.6"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                              />
                            </svg>
                          ) : null}
                        </a>
                      </Link>
                    </li>
                  );
                })}
              </ul>
            </div>
          ) : (
            <div>
              <div className="mobileMenuMap">
                <a
                  href="/"
                  onClick={(e) => {
                    e.preventDefault();
                    setMenuStep("service");
                  }}
                >
                  Services
                </a>
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_201_38845)">
                    <path
                      d="M8.33203 14.1665L12.4987 9.99984L8.33203 5.83317L8.33203 14.1665Z"
                      fill="#2F80ED"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_201_38845">
                      <rect
                        width="20"
                        height="20"
                        fill="white"
                        transform="translate(0 20) rotate(-90)"
                      />
                    </clipPath>
                  </defs>
                </svg>
                <span>{menuStep}</span>
              </div>
              <h2>{menuStep}</h2>
              <ul className="list-unstyled">
                {menuObject.map((el, i) => {
                  if (el.title === menuStep) {
                    return el.items.map((item, index) => {
                      return (
                        <li className="mb-4px">
                          <Link href={item.href}>
                            <a className="d-flex w-100 align-items-center justify-content-between">
                              <span>{item.title}</span>
                            </a>
                          </Link>
                        </li>
                      );
                    });
                  }
                })}
              </ul>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default MobileMenu;
